# Fusion Mobile - 3.0 Roadmap

## 3.0 开发路线图 (Roadmap)

本路线图概述了从当前的桌面原型向移动端节奏消除游戏转化的步骤。

### 第一阶段：移动端基础与陀螺仪集成 (Phase 1: Mobile Foundation & Gyro)
- [x] 集成 `sensors_plus` 插件。
- [x] 实现基础的陀螺仪数据获取与平滑处理。
- [x] 开发“环境旋转”逻辑，使游离方块随设备倾斜而旋转。
- [x] 实现“控制环 (Control Zone)”视觉效果与对齐逻辑。

### 第二阶段：节奏消除核心逻辑 (Phase 2: Rhythm Match Logic)
- [x] 实现“五连珠 (Match 5)”直线消除算法。
- [x] 实现“金字塔 (Match Pyramid 5-3-1)”消除算法。
- [x] 实现“大方块 (Match Square 3x3)”消除算法。
- [x] 实现消除后的连通性检查 (BFS)。
- [x] 实现“孤立方块”的脱离与重吸引逻辑。
- [x] 形状匹配改造为不依赖颜色（按拓扑/排布触发）。

### 第三阶段：音效与视觉打磨 (Phase 3: Audio & Visual Polish)
- [ ] 接入背景音乐与节拍系统。
- [ ] 实现基于节拍的消除判定（增加分数或特效）。
- [~] 完善纯黑白视觉风格（UI、转场动画、粒子效果）。  
  已完成：控制环可视化、融合轻微震动、引力线/脉冲可视化、消除吸积特效（黑洞脉冲）。  
  待完成：音效联动、转场/粒子等更完整表现。
- [~] 优化移动端性能，确保在高频率旋转下的流畅度。  
  已完成：批次磁吸、候选缓存、可见过滤、游离集合轻量去污。  
  待完成：针对高负载场景的进一步 profiling 与专项优化。

### 第四阶段：关卡与 Roguelike 元素 (Phase 4: Levels & Roguelike)
- [~] 设计基于波次的方块生成系统。  
  当前已具备可调定时生成（频率/数量/手动触发），后续可演进为波次模板系统。
- [ ] 引入随机增强属性（如吸引力增强、消除半径扩大等）。
- [ ] 实现持久化存储与基础的进度系统。
